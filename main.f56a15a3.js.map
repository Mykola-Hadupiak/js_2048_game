{"version":3,"sources":["scripts/main.js"],"names":["mainField","score","mainLength","blockGameClick","button","document","querySelector","fieldRows","querySelectorAll","gameScore","messageStart","messageLose","messageWin","randomNumber","Math","random","addNumber","freeTabRows","forEach","row","indexRow","cell","indexCell","push","length","floor","r","c","updateFieldCell","children","innerHTML","className","endOfTheGame","blockGame","filterZero","filter","slider","newRow","i","classList","remove","moveRight","reverse","moveLeft","moveUp","moveDown","freeCell","some","addEventListener","contains","add","e","code"],"mappings":"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","file":"main.f56a15a3.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// ########################################################\n// -----------------Logic and main selectors---------------\n// ########################################################\n\nlet mainField = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nlet score = 0;\nconst mainLength = 4;\nlet blockGameClick = false;\n\nconst button = document.querySelector('.button');\nconst fieldRows = document.querySelectorAll('.field-row');\nconst gameScore = document.querySelector('.game-score');\nconst messageStart = document.querySelector('.message-start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\n\n// ##########################################################\n// ------------------Main button logic-----------------------\n// ##########################################################\n\nbutton.addEventListener('click', () => {\n  blockGameClick = true;\n\n  if (button.classList.contains('start')) {\n    button.classList.remove('start');\n    button.classList.add('restart');\n    button.innerHTML = 'Restart';\n    messageStart.classList.add('hidden');\n\n    addNumber();\n    addNumber();\n    updateFieldCell();\n  } else if (button.classList.contains('restart')) {\n    button.classList.remove('restart');\n    button.classList.add('start');\n    button.innerHTML = 'Start';\n    messageStart.classList.remove('hidden');\n    messageLose.classList.add('hidden');\n    messageWin.classList.add('hidden');\n    blockGameClick = false;\n\n    mainField = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n\n    score = 0;\n    updateFieldCell();\n  }\n});\n\n// #############################################################\n// ----------------------------Randomizer-----------------------\n// #############################################################\n\nfunction randomNumber() {\n  return Math.random() >= 0.9 ? 4 : 2;\n};\n// #############################################################\n// -----------------------Adding new number---------------------\n// #############################################################\n\nfunction addNumber() {\n  const freeTabRows = [];\n\n  mainField.forEach((row, indexRow) => {\n    row.forEach((cell, indexCell) => {\n      if (cell === 0) {\n        freeTabRows.push([indexRow, indexCell]);\n      }\n    });\n  });\n\n  if (freeTabRows.length === 0) {\n    return;\n  }\n\n  const [r, c] = freeTabRows[Math.floor(Math.random() * freeTabRows.length)];\n\n  mainField[r][c] = randomNumber();\n};\n// ##########################################################################\n// -----------------------Updating cells in game-----------------------------\n// ##########################################################################\n\nfunction updateFieldCell() {\n  for (let r = 0; r < mainLength; r++) {\n    for (let c = 0; c < mainLength; c++) {\n      if (mainField[r][c] === 0) {\n        fieldRows[r].children[c].innerHTML = '';\n        fieldRows[r].children[c].className = 'field-cell';\n      } else {\n        fieldRows[r].children[c].innerHTML = mainField[r][c];\n\n        fieldRows[r].children[c].className = `\n        field-cell field-cell--${mainField[r][c]}\n        `;\n      }\n    }\n  }\n\n  endOfTheGame();\n  gameScore.innerHTML = score;\n}\n\n// #####################################################################\n// ------------------------Arrow keys implementation--------------------\n// #####################################################################\n\nfunction blockGame() {\n  for (let r = 0; r < mainLength; r++) {\n    for (let c = 0; c < mainLength; c++) {\n      if (mainField[r][c] === 2048) {\n        return false;\n      }\n    }\n  }\n}\n\ndocument.addEventListener('keyup', (e) => {\n  if ((blockGame() === false) || blockGameClick === false) {\n    return;\n  }\n\n  switch (e.code) {\n    case 'ArrowRight':\n      moveRight();\n      break;\n\n    case 'ArrowLeft':\n      moveLeft();\n      break;\n\n    case 'ArrowUp':\n      moveUp();\n      break;\n\n    case 'ArrowDown':\n      moveDown();\n      break;\n\n    default:\n      return;\n  }\n\n  addNumber();\n  updateFieldCell();\n});\n\n// #################################################################\n// -------------Implementation of each click and slider-------------\n// ##################################################################\n\nfunction filterZero(row) {\n  return row.filter(r => r !== 0);\n}\n\nfunction slider(row) {\n  let newRow = row;\n\n  newRow = filterZero(newRow);\n\n  for (let i = 0; i < newRow.length; i++) {\n    if (newRow[i] === newRow[i + 1]) {\n      newRow[i] *= 2;\n      newRow[i + 1] = 0;\n      score += newRow[i];\n\n      if (newRow[i] === 2048) {\n        messageWin.classList.remove('hidden');\n      }\n    }\n  }\n\n  newRow = filterZero(newRow);\n\n  while (newRow.length < mainLength) {\n    newRow.push(0);\n  }\n\n  return newRow;\n}\n\n// ---Moving right-----\n\nfunction moveRight() {\n  for (let r = 0; r < mainLength; r++) {\n    let row = mainField[r];\n\n    row.reverse();\n    row = slider(row);\n\n    mainField[r] = row.reverse();\n  }\n}\n\n// ---Moving left-----\n\nfunction moveLeft() {\n  for (let r = 0; r < mainLength; r++) {\n    let row = mainField[r];\n\n    row = slider(row);\n\n    mainField[r] = row;\n  }\n}\n\n// ---Moving up-----\n\nfunction moveUp() {\n  for (let c = 0; c < mainLength; c++) {\n    let row = [\n      mainField[0][c], mainField[1][c], mainField[2][c], mainField[3][c],\n    ];\n\n    row = slider(row);\n\n    for (let r = 0; r < mainLength; r++) {\n      mainField[r][c] = row[r];\n    }\n  }\n}\n\n// ---Moving down-----\n\nfunction moveDown() {\n  for (let c = 0; c < mainLength; c++) {\n    let row = [\n      mainField[0][c], mainField[1][c], mainField[2][c], mainField[3][c],\n    ];\n\n    row.reverse();\n    row = slider(row);\n    row.reverse();\n\n    for (let r = 0; r < mainLength; r++) {\n      mainField[r][c] = row[r];\n    }\n  }\n}\n\n// #################################################################\n// ----------------------Lose of the game logic----------------------\n// #################################################################\n\nfunction endOfTheGame() {\n  const freeCell = mainField.some(r => r.some(c => c === 0));\n\n  if (freeCell) {\n    return;\n  }\n\n  for (let r = 0; r < mainLength; r++) {\n    for (let c = 0; c < mainLength - 1; c++) {\n      if (mainField[r][c] === mainField[r][c + 1]\n        || mainField[c][r] === mainField[c + 1][r]) {\n        return;\n      }\n    }\n  }\n\n  messageLose.classList.remove('hidden');\n}\n"]}